import java.awt.Color;
import java.awt.Container;
import java.awt.Font;
import java.awt.Menu;
import java.awt.MenuBar;
import java.awt.MenuItem;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.ObjectOutputStream;
import java.io.PrintStream;
import java.net.ServerSocket;
import java.net.Socket;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.Statement;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.Vector;
import javax.swing.BorderFactory;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.border.Border;

public class CloudServer implements ActionListener {
	JFrame jf;
	Container c;
	JLabel l1, l2, l3, l4, l5, l6, l7, l8, l9, l10, l11, l12;
	JPanel p1, p2;
	JButton b1, b2, b3, b4;
	JScrollPane sp;
	JTextArea ta;
	JTextField t1;
	MenuBar mbr;
	Menu file;
	MenuItem  item2, users,owner,enduser,exit;
	Border b11, b22, b33;
	JScrollPane pane;
	String Scheme1, rank;
	String f1 = "", f2 = "", f3 = "", f4 = "", f5 = "", f6 = "", f7 = "",f8 = "";
	int count = 0;
	Timer timer;
	ImageIcon c1,c2,c3;
	JLabel a1,a2,a3,lab,network,cloud;
	
	public Font f = new Font("Times new roman", Font.BOLD, 18);
	public Font font = new Font("Times new roman", Font.BOLD, 18);
	
	JLabel mg1, mg2, mg3, mg4, mg5, mg6, mg7, mg8, mg9, mg10, g11, g22, g33,
			g44, g55, g66, g77;
	ImageIcon g1, g2, g3, g4, g5, g6, g7;
	String keyWord = "ef50a0ef2c3e3a5fdf803ae9752c8c66";

	CloudServer() {
		jf = new JFrame("Cloud Server::");
		c = jf.getContentPane();
		c.setLayout(null);
		
		c.setBackground(Color.WHITE);
		timer = new Timer(0, null);

		
		c1 = new ImageIcon(this.getClass().getResource("images/cloud1.png"));
		a1=new JLabel();
		a1.setIcon(c1);
		a1.setBounds(420, 150, 500, 200);
		c.add(a1);
		
		c2 = new ImageIcon(this.getClass().getResource("images/cloud4.png"));
		a2=new JLabel();
		a2.setIcon(c2);
		a2.setBounds(300, 150, 200, 200);
		c.add(a2);
		
		c3 = new ImageIcon(this.getClass().getResource("images/cloud3.jpg"));
		a3=new JLabel();
		a3.setIcon(c3);
		a3.setBounds(100, 150, 200, 200);
		c.add(a3);
		
		lab = new JLabel("UPLOADED SUCCESSFULLY");
		lab.setFont(f);
		lab.setBounds(420, 340, 500, 30);
		lab.setVisible(false);
		c.add(lab);
		
		network = new JLabel("Adhoc Network");
		network.setBounds(120, 50, 200, 200);
		network.setFont(font);
		c.add(network);
		
		cloud = new JLabel("Cloud Server");
		cloud.setBounds(500, 50, 500, 200);
		cloud.setFont(font);
		c.add(cloud);
		
		ImageIcon banner = new ImageIcon(this.getClass().getResource("images/server.png"));
		JLabel title = new JLabel();
		title.setIcon(banner);
		title.setBounds(-15, -30,  1300,590);

		t1 = new JTextField(15);
		Border b22 = BorderFactory.createBevelBorder(0);
		l2 = new JLabel();
		l2.setBorder(b22);
		
		b1 = new JButton("View Cloud Files");
		b1.setForeground(Color.BLACK);
		b1.addActionListener(this);

		mbr = new MenuBar();
		file = new Menu("File");

		users = new MenuItem("View Attackers");
		owner = new MenuItem("View Owner Details");
		enduser = new MenuItem("View End User Details");
		exit = new MenuItem("Exit");
	
		users.addActi