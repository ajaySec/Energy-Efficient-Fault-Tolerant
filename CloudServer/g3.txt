e(true);
							lab.setVisible(true);
							clear();
							
							String query = "insert into cloudfiles values('"+oname+"','" +fname+ "','" +sk+ "','"+h1+"','"+h2+"','"+h3+"','"+h4+"','"+h5+"','"+tym+"')";	
							stmt.executeUpdate(query);
				
	
							PrintStream out99 = null;
							try {
							    out99 = new PrintStream(new FileOutputStream("CloudServer\\"+fname+".txt"));
							    out99.print(ct);
							    
							    
							}
							finally {
							    if (out99 != null) out99.close();
							}
							
							PrintStream out = null;
							try {
							    out = new PrintStream(new FileOutputStream("CloudServer\\"+fname+"1"+".txt"));
							    out.print(sp1);
							    
							    
							}
							finally {
							    if (out != null) out.close();
							}
							
							PrintStream out1 = null;
							try {
							    out1 = new PrintStream(new FileOutputStream("CloudServer\\"+fname+"2"+".txt"));
							    out1.print(sp2);
							    
							}
							finally {
							    if (out1 != null) out1.close();
							}
							
							PrintStream out2 = null;
							try {
							    out2 = new PrintStream(new FileOutputStream("CloudServer\\"+fname+"3"+".txt"));
							    out2.print(sp3);
							    
							}
							finally {
							    if (out2 != null) out2.close();
							}
							
							
							PrintStream out3 = null;
							try {
							    out3 = new PrintStream(new FileOutputStream("CloudServer\\"+fname+"4"+".txt"));
							    out3.print(sp4);
							    
							}
							finally {
							    if (out3 != null) out3.close();
							}
							
							PrintStream out4 = null;
							try {
							    out4 = new PrintStream(new FileOutputStream("CloudServer\\"+fname+"5"+".txt"));
							    out4.print(sp5);
							    
							}
							finally {
							    if (out4 != null) out4.close();
							}
							
							
							
							
							JOptionPane.showMessageDialog(null, "Data Uploaded Successfully");
						
					}
				} catch (Exception e23) {
					e23.printStackTrace();
				}
			} 
		
						if(this.port==4545)
						{
					
							try
							{
								ServerSocket server909 = new ServerSocket(4545);
								Socket con777;
								while (true) 
								{
								con777 = server909.accept();
								
								DataInputStream dis = new DataInputStream(con777.getInputStream());
								
								String email	= dis.readUTF();
								String name	= dis.readUTF();
								String pass	= dis.readUTF();
								String age	= dis.readUTF();
								String gender	= dis.readUTF();
								String country	= dis.readUTF();
								
								ResultSet r1=connect.createStatement().executeQuery("insert into register values('"+email+"','"+name+"','"+pass+"','"+age+"','"+gender+"','"+country+"')");
								
								if(r1.next()==true)
								{
									DataOutputStream dos1 = new DataOutputStream(con777.getOutputStream());
									dos1.writeUTF("reg");
								}
								
								}
							}catch (Exception e) {
								
							}
						}	
		 if(this.port==7373)
			{
				try
				{
					ServerSocket server909 = new ServerSocket(7373);
					Socket con777;
					while (true) 
					{
					con777 = server909.accept();
					
					DataInputStream dis = new DataInputStream(con777.getInputStream());
					
					String user	= dis.readUTF();
					String pass	= dis.readUTF();
					ResultSet r1=connect.createStatement().executeQuery("select * from register where name='"+user+"' and password='"+pass+"'");
					
					if(r1.next()==true)
					{
						DataOutputStream dos1 = new DataOutputStream(con777.getOutputStream());
						dos1.writeUTF("yes");
					}
					
					}
				}catch (Exception e) {
					
				}
			}	

		 
		 if(this.port==3434)
			{
		
				t